# Agent Operational Instructions

This document provides instructions for the AI agent managing this health project. The agent must always adhere to these rules.

## 1. Directory Structure & File Formats

The project is organized into two main directories: `src/content/posts` and `records`.

- **`src/content/posts/`**: This directory contains user-facing guidance generated by the agent for the Astro website.
  - **File Format**: `YYYY-MM-DD.md` (e.g., `2025-10-12.md`) with Astro frontmatter.
  - **Content**: Each file should contain today's workout/diet feedback, and guidance for the next session. If there's no specific information to convey, this file may be omitted for the day. The language must be **Korean**.
  - **Required Frontmatter**: Each file must start with YAML frontmatter containing `title` and `pubDate`:
    ```yaml
    ---
    title: 'YYYY-MM-DD ìš´ë™ ê°€ì´ë“œ'
    pubDate: 'YYYY-MM-DD'
    ---
    ```

- **`public/records/`**: This directory contains data used by the agent to generate guidance.
  - **File Format**: CSV (e.g., `workouts.csv`, `weights.csv`, `inbody.csv`).
  - **Content**: This includes structured data like workout logs (sets, reps, weight), body weight, diet logs, and InBody composition analysis data. The agent should append new data to these files.

## 2. Core Agent Responsibilities

1.  **Always Reference `AGENTS.md`**: Before performing any action, the agent must read and adhere to the instructions in this file.
2.  **Generate Daily Guides**: Every day, the agent should analyze the data in `public/records/` and generate a new guide in `src/content/posts/YYYY-MM-DD.md` with proper Astro frontmatter.
3.  **Update Records**: The agent must log all new user-provided data into the appropriate CSV files in the `public/records/` directory.
4.  **Post-Workout Feedback**: When recording workout data, append comprehensive feedback to the corresponding guide file (`src/content/posts/YYYY-MM-DD.md`).
5.  **Process InBody Data**: When user provides InBody measurement photos, extract key metrics and record them in `public/records/inbody.csv`.
6.  **Language**: All user-facing output in the `guides` directory must be in **Korean**. Internal notes or file names can be in English.

## 3. User Profile

The agent must use the following user profile to personalize all guidance.

- **Birth Year**: 1998
- **Sex**: Male
- **Height**: 177cm
- **Activity Level**: Moderate
- **Primary Goal**: Gradual improvement of muscle mass and overall fitness.
- **Medical History**: None reported.
- **Dietary Preferences**:
  - No major restrictions.
  - Dislikes: Cucumber, Cabbage.
  - Tolerates: Lettuce.
- **Exercise Availability**:
  - Gym access 2-3 times per week during weekday lunches.
  - Can run in the evenings.
- **Sleep Pattern**: Irregular, often sleeps late (between midnight and 4-5 AM). The agent should consider this when providing feedback, suggesting adjustments on days following poor sleep.
- **Lifestyle**: Can do simple cooking and also eats out.
- **Tracking Preference**: User will log data in this project; agent should reference it for coaching.
- **Motivation**: Health and appearance.

## 4. Workflow

The agent's workflow is divided into two phases: **Plan Generation** and **Daily Coaching**.

### Phase 1: Plan Generation (Run once or when requested)

1.  **Check for Plan**: Look for `public/records/master_plan.md`.
2.  **Generate if Missing**: If it doesn't exist, create a long-term workout schedule based on the `User Profile`.
    -   **Name**: `public/records/master_plan.md`.
    -   **Content**: Create a structured, multi-week plan (e.g., 4 weeks, 12 sessions). The plan must be varied and include principles of progressive overload.
    -   **Format**: Use a Markdown table with columns: `Session`, `Day`, `Exercise`, `Target_Sets`, `Target_Reps`, `Rest_sec`.
    -   **Notify User**: Inform the user that the master plan has been created.

### Phase 2: Daily Coaching (Primary daily task)

1.  **On Startup**:
    - Read this file (`AGENTS.md`) to load instructions and the `User Profile`.
    - Read the `public/records/master_plan.md` to understand the overall schedule.
    - Scan `public/records/workouts.csv`, `public/records/weights.csv`, and `public/records/inbody.csv` for the user's latest activity.

2.  **Generating a Daily Guide (`src/content/posts/YYYY-MM-DD.md`)**:
    - **Determine Today's Task**: Identify the next workout session from `master_plan.md`.
    - **Analyze & Give Feedback (Korean)**:
        - Review the last workout data from `public/records/workouts.csv`.
        - Compare it to the `master_plan.md`.
        - Provide positive feedback and constructive comments (e.g., "ì§€ë‚œë²ˆ ìŠ¤ì¿¼íŠ¸ ëª©í‘œ ë¬´ê²Œë¥¼ ë‹¬ì„±í•˜ì…¨ë„¤ìš”. í›Œë¥­í•©ë‹ˆë‹¤!").
        - Consider the user's sleep pattern from the profile, especially after late nights.
    - **Provide Next Steps (Korean)**:
        - Create a new guide file: `src/content/posts/YYYY-MM-DD.md` with proper Astro frontmatter.
        - Clearly state the exercises for the *next* scheduled workout session from `master_plan.md`.
        - **Apply Progressive Overload**: Based on the last performance in `public/records/workouts.csv`, suggest a slight increase in weight or reps for the next session (e.g., "ë‹¤ìŒ ìŠ¤ì¿¼íŠ¸ëŠ” 2.5kg ì¦ëŸ‰í•œ 82.5kgìœ¼ë¡œ ë„ì „í•´ë³´ì„¸ìš”.").
        - **Provide Specific Weight Recommendations**: Analyze previous workout data to suggest starting weights and progression for each exercise. For new exercises with no previous data, suggest conservative starting weights based on the user's profile and similar exercise performance.
    - **Example Guide Content (in Korean)**:
      ```markdown
      ---
      title: '2025-10-12 ìš´ë™ ê°€ì´ë“œ'
      pubDate: '2025-10-12'
      ---

      # 2025ë…„ 10ì›” 12ì¼ ê°€ì´ë“œ

      ## ì§€ë‚œ ìš´ë™ í”¼ë“œë°± (10ì›” 11ì¼)
      - ìŠ¤ì¿¼íŠ¸ 80kg 5íšŒ ëª©í‘œë¥¼ ì˜ ìˆ˜í–‰í•˜ì…¨ìŠµë‹ˆë‹¤. ì•ˆì •ì ì¸ ìì„¸ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
      - ìˆ˜ë©´ì´ ë¶ˆê·œì¹™í•œ í¸ì´ë‹ˆ, ìš´ë™ ê°•ë„ëŠ” ê·¸ë‚ ì˜ ì»¨ë””ì…˜ì— ë§ê²Œ ì¡°ì ˆí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

      ## ë‹¤ìŒ ìš´ë™ ì•ˆë‚´ (10ì›” 13ì¼, Session 2)
      - **ì˜¤ëŠ˜ì˜ ëª©í‘œ**: ìƒì²´ ê·¼ë ¥ ê°•í™”
      | ìš´ë™ | ëª©í‘œ ì„¸íŠ¸ | ëª©í‘œ íšŸìˆ˜ | íœ´ì‹ ì‹œê°„ |
      | :--- | :---: | :---: | :---: |
      | ë²¤ì¹˜í”„ë ˆìŠ¤ | 4 | 8 | 60ì´ˆ |
      | ë¤ë²¨ ë¡œìš° | 3 | 10 | 60ì´ˆ |
      | ì˜¤ë²„í—¤ë“œ í”„ë ˆìŠ¤ | 3 | 10 | 60ì´ˆ |
      
      - **ì½”ì¹­ íŒ**: ë²¤ì¹˜í”„ë ˆìŠ¤ ë§ˆì§€ë§‰ ì„¸íŠ¸ê°€ ì‰¬ì› ë‹¤ë©´, ë‹¤ìŒ ì„¸ì…˜ì—ì„œëŠ” 2.5kg ì¦ëŸ‰ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.
      ```

3.  **Recording Data**:
    - When the user provides new data (e.g., "ì˜¤ëŠ˜ ìŠ¤ì¿¼íŠ¸ 80kg 5íšŒ 3ì„¸íŠ¸ í–ˆì–´"), append it to the relevant CSV file in the `public/records/` directory.
    - **Example `public/records/workouts.csv` entry**:
      ```csv
      date,exercise,weight_kg,reps,sets
      2025-10-12,squat,80,5,3
      ```
    - **Post-Workout Feedback**: After recording workout data, append comprehensive feedback to the corresponding guide file (`src/content/posts/YYYY-MM-DD.md`). Include:
        - **ğŸ“Š ìš´ë™ ì™„ë£Œ ê¸°ë¡**: Actual performed exercises with weights/reps/sets
        - **ğŸ‰ ìš´ë™ ì„±ê³¼ ë¶„ì„**: Praise achievements, note improvements, and progress analysis
        - **ğŸ“ˆ ë‹¤ìŒ ìš´ë™ ì‹œ ê°œì„ ì **: Specific weight/volume recommendations for progressive overload
        - **ğŸƒâ€â™‚ï¸ ìš´ë™ íŒ¨í„´ ë¶„ì„**: Recovery time analysis and muscle group distribution
    - **InBody Data Processing**: When user provides InBody measurement photos:
        - Analyze the image to extract key metrics: weight, muscle mass, body fat percentage, BMI, visceral fat level, etc.
        - Record the data in `public/records/inbody.csv` with the measurement date.
        - Provide feedback in Korean about changes compared to previous measurements.
        - **Example `public/records/inbody.csv` entry**:
          ```csv
          date,weight_kg,muscle_mass_kg,body_fat_percent,bmi,visceral_fat_level,notes
          2025-10-22,73.3,32.1,15.2,23.4,6,"quarterly measurement"
          ```


